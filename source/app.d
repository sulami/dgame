import derelict.opengl3.gl3;

import display;
import entity;
import texture;

int main(string[] args)
{
    Display display = new Display();

    GLfloat cube_vertex[] = [ -1.0f,-1.0f,-1.0f,
                              -1.0f,-1.0f, 1.0f,
                              -1.0f, 1.0f, 1.0f,
                               1.0f, 1.0f,-1.0f,
                              -1.0f,-1.0f,-1.0f,
                              -1.0f, 1.0f,-1.0f,
                               1.0f,-1.0f, 1.0f,
                              -1.0f,-1.0f,-1.0f,
                               1.0f,-1.0f,-1.0f,
                               1.0f, 1.0f,-1.0f,
                               1.0f,-1.0f,-1.0f,
                              -1.0f,-1.0f,-1.0f,
                              -1.0f,-1.0f,-1.0f,
                              -1.0f, 1.0f, 1.0f,
                              -1.0f, 1.0f,-1.0f,
                               1.0f,-1.0f, 1.0f,
                              -1.0f,-1.0f, 1.0f,
                              -1.0f,-1.0f,-1.0f,
                              -1.0f, 1.0f, 1.0f,
                              -1.0f,-1.0f, 1.0f,
                               1.0f,-1.0f, 1.0f,
                               1.0f, 1.0f, 1.0f,
                               1.0f,-1.0f,-1.0f,
                               1.0f, 1.0f,-1.0f,
                               1.0f,-1.0f,-1.0f,
                               1.0f, 1.0f, 1.0f,
                               1.0f,-1.0f, 1.0f,
                               1.0f, 1.0f, 1.0f,
                               1.0f, 1.0f,-1.0f,
                              -1.0f, 1.0f,-1.0f,
                               1.0f, 1.0f, 1.0f,
                              -1.0f, 1.0f,-1.0f,
                              -1.0f, 1.0f, 1.0f,
                               1.0f, 1.0f, 1.0f,
                              -1.0f, 1.0f, 1.0f,
                               1.0f,-1.0f, 1.0f ];

    GLfloat cube_uv[] = [
        0.000059f, 1.0f-0.000004f,
        0.000103f, 1.0f-0.336048f,
        0.335973f, 1.0f-0.335903f,
        1.000023f, 1.0f-0.000013f,
        0.667979f, 1.0f-0.335851f,
        0.999958f, 1.0f-0.336064f,
        0.667979f, 1.0f-0.335851f,
        0.336024f, 1.0f-0.671877f,
        0.667969f, 1.0f-0.671889f,
        1.000023f, 1.0f-0.000013f,
        0.668104f, 1.0f-0.000013f,
        0.667979f, 1.0f-0.335851f,
        0.000059f, 1.0f-0.000004f,
        0.335973f, 1.0f-0.335903f,
        0.336098f, 1.0f-0.000071f,
        0.667979f, 1.0f-0.335851f,
        0.335973f, 1.0f-0.335903f,
        0.336024f, 1.0f-0.671877f,
        1.000004f, 1.0f-0.671847f,
        0.999958f, 1.0f-0.336064f,
        0.667979f, 1.0f-0.335851f,
        0.668104f, 1.0f-0.000013f,
        0.335973f, 1.0f-0.335903f,
        0.667979f, 1.0f-0.335851f,
        0.335973f, 1.0f-0.335903f,
        0.668104f, 1.0f-0.000013f,
        0.336098f, 1.0f-0.000071f,
        0.000103f, 1.0f-0.336048f,
        0.000004f, 1.0f-0.671870f,
        0.336024f, 1.0f-0.671877f,
        0.000103f, 1.0f-0.336048f,
        0.336024f, 1.0f-0.671877f,
        0.335973f, 1.0f-0.335903f,
        0.667969f, 1.0f-0.671889f,
        1.000004f, 1.0f-0.671847f,
        0.667979f, 1.0f-0.335851f
    ];

    Texture t = new Texture("tex.png");

    Entity cube = new Entity(display, cube_vertex, t, cube_uv);
    Entity cube2 = new Entity(display, cube_vertex, t, cube_uv);

    cube2.move(0f,-2.1,0f);

    /* main loop */
    while (display.event()) {
        cube.rotate(0f, .05, 0f);
        cube2.rotate(0f, -.02, 0f);
        display.render();
    }

    display.cleanup();

    return 0;
}

